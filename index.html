<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psychiatry Patient Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .tab-button {
            transition: all 0.3s ease;
        }
        @media print {
            body > div:not(.printable-content) {
                display: none;
            }
            .printable-content {
                display: block !important;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: auto;
                background: white;
            }
        }
    </style>
</head>
<body class="bg-gray-50 p-4 font-sans antialiased text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        const AppContext = createContext();

        const AppProvider = ({ children }) => {
            const [loading, setLoading] = useState(false);
            const [userId] = useState('demo-user-' + Math.random().toString(36).substr(2, 9));

            return (
                <AppContext.Provider value={{ userId, loading }}>
                    {children}
                </AppContext.Provider>
            );
        };

        const App = () => {
            const { userId, loading } = useContext(AppContext);
            const [patients, setPatients] = useState([]);
            const [view, setView] = useState('list');
            const [selectedPatient, setSelectedPatient] = useState(null);
            const [doctorInfo, setDoctorInfo] = useState({ 
                name: 'Dr. John Doe', 
                credentials: 'M.D., Psychiatrist', 
                contact: '555-555-5555',
                address: '123 Medical Center Dr, Suite 100'
            });

            const handleViewChange = (newView, patient = null) => {
                setView(newView);
                setSelectedPatient(patient);
            };

            // Demo data storage using state
            useEffect(() => {
                const demoPatients = [
                    {
                        id: '1',
                        name: 'Jane Smith',
                        dob: '1985-03-15',
                        diagnosis: 'Major Depressive Disorder',
                        notes: [],
                        medications: [],
                        appointments: [],
                        bills: []
                    },
                    {
                        id: '2',
                        name: 'Robert Johnson',
                        dob: '1978-11-22',
                        diagnosis: 'Generalized Anxiety Disorder',
                        notes: [],
                        medications: [],
                        appointments: [],
                        bills: []
                    }
                ];
                setPatients(demoPatients);
            }, []);

            const generateId = () => Date.now().toString() + Math.random().toString(36).substr(2, 9);

            const handleAddPatient = async (id, patientData) => {
                try {
                    const newPatient = {
                        ...patientData,
                        id: generateId(),
                        notes: [],
                        medications: [],
                        appointments: [],
                        bills: []
                    };
                    setPatients(prev => [...prev, newPatient]);
                    handleViewChange('list');
                } catch (e) {
                    console.error("Error adding patient: ", e);
                }
            };

            const handleUpdatePatient = async (patientId, patientData) => {
                try {
                    setPatients(prev => prev.map(p => 
                        p.id === patientId ? { ...p, ...patientData } : p
                    ));
                    handleViewChange('list');
                } catch (e) {
                    console.error("Error updating patient: ", e);
                }
            };

            const handleDeletePatient = async (patientId) => {
                try {
                    setPatients(prev => prev.filter(p => p.id !== patientId));
                } catch (e) {
                    console.error("Error deleting patient: ", e);
                }
            };

            const renderContent = () => {
                if (loading) {
                    return <div className="flex items-center justify-center min-h-[300px] text-xl font-semibold text-gray-700">Loading...</div>;
                }
                
                switch (view) {
                    case 'list':
                        return <PatientList patients={patients} setView={handleViewChange} handleDeletePatient={handleDeletePatient} />;
                    case 'add':
                        return <PatientForm onSave={handleAddPatient} setView={handleViewChange} />;
                    case 'details':
                        return <PatientDetails patient={selectedPatient} patients={patients} setPatients={setPatients} setView={handleViewChange} doctorInfo={doctorInfo} setDoctorInfo={setDoctorInfo} />;
                    case 'edit':
                        return <PatientForm patient={selectedPatient} onSave={handleUpdatePatient} setView={handleViewChange} />;
                    case 'prescriptions':
                        return <PrescriptionForm patient={selectedPatient} setView={handleViewChange} doctorInfo={doctorInfo} />;
                    case 'settings':
                        return <SettingsForm doctorInfo={doctorInfo} setDoctorInfo={setDoctorInfo} setView={handleViewChange} />;
                    default:
                        return null;
                }
            };

            const PlusCircle = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>;
            const User = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>;

            return (
                <div className="min-h-screen">
                    <header className="flex flex-col sm:flex-row justify-between items-center py-6 px-4 sm:px-8 bg-white shadow-md rounded-xl mb-6">
                        <div className="flex items-center space-x-4 mb-4 sm:mb-0">
                            <h1 className="text-3xl font-bold tracking-tight text-gray-800">Mindful Manager</h1>
                            <p className="hidden md:block text-sm text-gray-500">Psychiatry Patient Management (Demo Mode)</p>
                        </div>
                        <div className="flex items-center space-x-2">
                            <button onClick={() => { handleViewChange('list'); }} className="flex items-center px-4 py-2 bg-gray-200 text-gray-700 hover:bg-gray-300 rounded-lg shadow-sm font-medium">
                                <User /> <span className="ml-2">All Patients</span>
                            </button>
                            <button onClick={() => handleViewChange('add')} className="flex items-center px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg shadow-sm font-medium">
                                <PlusCircle /> <span className="ml-2">New Patient</span>
                            </button>
                        </div>
                    </header>
                    <main className="container mx-auto max-w-5xl">
                        <div className="mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <p className="text-sm text-yellow-800">
                                <strong>Demo Mode:</strong> This is a demonstration version. Data is stored locally and will not persist between sessions. 
                                AI features are disabled (would require API configuration).
                            </p>
                        </div>
                        {renderContent()}
                    </main>
                </div>
            );
        };

        const PatientList = ({ patients, setView, handleDeletePatient }) => {
            const ConfirmationDialog = ({ onConfirm, children }) => {
                const [open, setOpen] = useState(false);
                return (
                    <>
                        <div onClick={() => setOpen(true)} className="inline-block cursor-pointer">
                            {children}
                        </div>
                        {open && (
                            <div className="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 p-4">
                                <div className="w-full max-w-sm rounded-lg bg-white p-6 shadow-lg">
                                    <h3 className="mb-2 text-xl font-semibold">Confirm Deletion</h3>
                                    <p className="mb-4 text-gray-500">Are you sure you want to delete this patient? This action cannot be undone.</p>
                                    <div className="flex justify-end space-x-2">
                                        <button onClick={() => setOpen(false)} className="rounded-lg bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300">Cancel</button>
                                        <button onClick={() => { onConfirm(); setOpen(false); }} className="rounded-lg bg-red-600 px-4 py-2 text-white hover:bg-red-700">Delete</button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </>
                );
            };
            const Pencil = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>;
            const Trash2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>;

            return (
                <div className="rounded-xl bg-white shadow-lg">
                    <div className="p-6">
                        <h2 className="text-2xl font-semibold">Patient Roster</h2>
                        <p className="mt-1 text-sm text-gray-500">A complete list of your patients.</p>
                    </div>
                    <div className="p-6 pt-0">
                        {patients.length === 0 ? (
                            <p className="text-center text-gray-500">No patients found. Add a new one to get started.</p>
                        ) : (
                            <div className="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
                                {patients.map(patient => (
                                    <div key={patient.id} className="rounded-lg border bg-white shadow-sm transition-shadow duration-300 hover:shadow-lg">
                                        <div className="flex items-start justify-between p-4 pb-2">
                                            <div>
                                                <h3 className="text-lg font-semibold">{patient.name}</h3>
                                                <p className="text-xs text-gray-500">DOB: {patient.dob}</p>
                                            </div>
                                            <div className="flex space-x-1">
                                                <button onClick={() => setView('edit', patient)} className="h-auto rounded-lg bg-transparent p-2 text-gray-500 hover:bg-gray-100 hover:text-blue-600">
                                                    <Pencil />
                                                </button>
                                                <ConfirmationDialog onConfirm={() => handleDeletePatient(patient.id)}>
                                                    <button className="h-auto rounded-lg bg-transparent p-2 text-gray-500 hover:bg-gray-100 hover:text-red-600">
                                                        <Trash2 />
                                                    </button>
                                                </ConfirmationDialog>
                                            </div>
                                        </div>
                                        <div className="px-6 py-2">
                                            <p className="text-sm">{patient.diagnosis}</p>
                                        </div>
                                        <div className="p-6 pt-2">
                                            <button onClick={() => setView('details', patient)} className="w-full rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">
                                                View Details
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const PatientForm = ({ patient, onSave, setView }) => {
            const [formData, setFormData] = useState(patient || { name: '', dob: '', diagnosis: '' });
            const handleChange = (e) => {
                const { id, value } = e.target;
                setFormData({ ...formData, [id]: value });
            };
            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(patient ? patient.id : null, formData);
            };
            return (
                <div className="rounded-xl bg-white shadow-lg">
                    <div className="p-6">
                        <h2 className="text-2xl font-semibold">{patient ? 'Edit Patient' : 'Add New Patient'}</h2>
                        <p className="mt-1 text-sm text-gray-500">{patient ? 'Update patient details.' : 'Fill out the form to add a new patient to your records.'}</p>
                    </div>
                    <form onSubmit={handleSubmit}>
                        <div className="space-y-4 p-6 pt-0">
                            <div>
                                <label htmlFor="name" className="mb-1 block text-sm font-medium text-gray-700">Name</label>
                                <input id="name" type="text" value={formData.name} onChange={handleChange} required className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                            </div>
                            <div>
                                <label htmlFor="dob" className="mb-1 block text-sm font-medium text-gray-700">Date of Birth</label>
                                <input id="dob" type="date" value={formData.dob} onChange={handleChange} required className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                            </div>
                            <div>
                                <label htmlFor="diagnosis" className="mb-1 block text-sm font-medium text-gray-700">Diagnosis</label>
                                <textarea id="diagnosis" value={formData.diagnosis} onChange={handleChange} rows="3" className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                            </div>
                        </div>
                        <div className="flex justify-end space-x-2 p-6">
                            <button type="button" onClick={() => setView('list')} className="rounded-lg bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300">Cancel</button>
                            <button type="submit" className="rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">{patient ? 'Update Patient' : 'Add Patient'}</button>
                        </div>
                    </form>
                </div>
            );
        };

        const PatientDetails = ({ patient, patients, setPatients, setView, doctorInfo, setDoctorInfo }) => {
            const [tab, setTab] = useState('notes');
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [modalContent, setModalContent] = useState({ title: '', text: '' });
            const [isLoadingModal, setIsLoadingModal] = useState(false);

            const userIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>;
            const magicSparkle = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m4.93 19.07 1.41-1.41"/><path d="m17.66 6.34 1.41-1.41"/><path d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"/></svg>;
            
            const handleOpenModal = (title, text) => {
                setModalContent({ title, text });
                setIsModalOpen(true);
            };
            
            const handleCloseModal = () => {
                setIsModalOpen(false);
                setModalContent({ title: '', text: '' });
            };
            
            const generateReferralLetter = async () => {
                setIsLoadingModal(true);
                handleOpenModal("Generating Referral Letter...", "");
                
                // Mock response for demo
                setTimeout(() => {
                    const mockLetter = `Dear Colleague,

I am referring ${patient.name} (DOB: ${patient.dob}) for specialized psychiatric evaluation and ongoing care.

CLINICAL SUMMARY:
${patient.name} presents with ${patient.diagnosis}. Based on our clinical assessment, the patient would benefit from specialized psychiatric care including medication management and comprehensive treatment planning.

REASON FOR REFERRAL:
The patient requires specialized care for their diagnosis, specifically for medication management and long-term treatment planning. Our initial assessment suggests the need for more intensive psychiatric intervention.

Please feel free to contact me at ${doctorInfo.contact} if you require any additional information.

Thank you for your consideration of this patient.

Sincerely,
${doctorInfo.name}, ${doctorInfo.credentials}`;
                    
                    handleOpenModal("Generated Referral Letter", mockLetter);
                    setIsLoadingModal(false);
                }, 2000);
            };

            return (
                <div className="rounded-xl bg-white shadow-lg">
                    <div className="p-6">
                        <h2 className="flex items-center text-2xl font-semibold">
                            {userIcon({})} {patient.name}
                        </h2>
                        <p className="mt-1 text-sm text-gray-500">
                            Patient Profile and Administrative Records
                        </p>
                        <div className="mt-4 flex flex-wrap space-x-2 border-b border-gray-200">
                            <button onClick={() => setTab('notes')} className={`-mb-px px-4 py-2 text-sm font-medium border-b-2 ${tab === 'notes' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}>Session Notes</button>
                            <button onClick={() => setTab('medications')} className={`-mb-px px-4 py-2 text-sm font-medium border-b-2 ${tab === 'medications' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}>Medications</button>
                            <button onClick={() => setTab('billing')} className={`-mb-px px-4 py-2 text-sm font-medium border-b-2 ${tab === 'billing' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}>Billing</button>
                            <button onClick={() => setTab('appointments')} className={`-mb-px px-4 py-2 text-sm font-medium border-b-2 ${tab === 'appointments' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}>Appointments</button>
                            <button onClick={() => setTab('summary')} className={`-mb-px px-4 py-2 text-sm font-medium border-b-2 ${tab === 'summary' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}>Case Summary</button>
                            <button onClick={() => setTab('settings')} className={`-mb-px px-4 py-2 text-sm font-medium border-b-2 ${tab === 'settings' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'}`}>Settings</button>
                        </div>
                        <div className="mt-4">
                            <button onClick={generateReferralLetter} disabled={isLoadingModal} className={`flex items-center rounded-lg px-4 py-2 text-sm font-medium transition-colors ${isLoadingModal ? 'bg-gray-400 text-gray-600 cursor-not-allowed' : 'bg-purple-600 text-white hover:bg-purple-700'}`}>
                                {magicSparkle({})} Generate Referral Letter
                            </button>
                        </div>
                    </div>
                    <div className="p-6 pt-0">
                        {tab === 'notes' && <SessionNotesSection patient={patient} patients={patients} setPatients={setPatients} doctorInfo={doctorInfo} />}
                        {tab === 'medications' && <MedicationSection patient={patient} patients={patients} setPatients={setPatients} setView={setView} />}
                        {tab === 'billing' && <BillingSection patient={patient} patients={patients} setPatients={setPatients} />}
                        {tab === 'appointments' && <AppointmentsSection patient={patient} patients={patients} setPatients={setPatients} />}
                        {tab === 'summary' && <CaseSummarySection patient={patient} patients={patients} setPatients={setPatients} />}
                        {tab === 'settings' && <SettingsForm doctorInfo={doctorInfo} setDoctorInfo={setDoctorInfo} />}
                    </div>
                    <div className="p-6">
                        <button onClick={() => setView('list')} className="rounded-lg bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300">
                            Back to List
                        </button>
                    </div>
                    {isModalOpen && (
                        <Modal title={modalContent.title} text={modalContent.text} onClose={handleCloseModal} isLoading={isLoadingModal} />
                    )}
                </div>
            );
        };

        const Modal = ({ title, text, onClose, isLoading }) => {
            const [copyStatus, setCopyStatus] = useState("Copy");
            const copyToClipboard = () => {
                navigator.clipboard.writeText(text).then(() => {
                    setCopyStatus("Copied!");
                    setTimeout(() => setCopyStatus("Copy"), 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                    setCopyStatus("Failed to copy");
                });
            };
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 p-4">
                    <div className="w-full max-w-lg rounded-lg bg-white p-6 shadow-lg max-h-[80vh] overflow-y-auto">
                        <h3 className="mb-2 text-xl font-semibold">{title}</h3>
                        <div className="mb-4 max-h-96 overflow-y-auto">
                            {isLoading ? (
                                <div className="text-center text-gray-500">Loading...</div>
                            ) : (
                                <p className="whitespace-pre-wrap text-sm text-gray-800">{text}</p>
                            )}
                        </div>
                        <div className="flex justify-end space-x-2">
                            <button onClick={onClose} className="rounded-lg bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300">Close</button>
                            {!isLoading && text && (
                                <button onClick={copyToClipboard} className="rounded-lg bg-green-600 px-4 py-2 text-white hover:bg-green-700">{copyStatus}</button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const SessionNotesSection = ({ patient, patients, setPatients, doctorInfo }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [modalContent, setModalContent] = useState({ title: '', text: '' });
            const [isLoadingModal, setIsLoadingModal] = useState(false);

            const handleOpenModal = (title, text) => {
                setModalContent({ title, text });
                setIsModalOpen(true);
            };
            
            const handleCloseModal = () => {
                setIsModalOpen(false);
                setModalContent({ title: '', text: '' });
            };

            const handleAddNote = (noteText) => {
                const newNote = {
                    id: Date.now().toString(),
                    note: noteText,
                    date: new Date().toISOString().slice(0, 10),
                    timestamp: new Date(),
                };
                
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, notes: [...(p.notes || []), newNote] }
                        : p
                ));
            };

            const handleDeleteNote = (noteId) => {
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, notes: (p.notes || []).filter(n => n.id !== noteId) }
                        : p
                ));
            };

            const generateTreatmentPlan = () => {
                setIsLoadingModal(true);
                handleOpenModal("Generating Treatment Plan...", "");
                
                // Mock response for demo
                setTimeout(() => {
                    const mockPlan = `TREATMENT PLAN FOR ${patient.name}

DIAGNOSIS: ${patient.diagnosis}

SHORT-TERM GOALS (1-3 months):
1. Establish therapeutic rapport and treatment alliance
2. Conduct comprehensive psychiatric evaluation
3. Initiate appropriate medication management if indicated
4. Develop coping strategies for immediate symptom relief

LONG-TERM GOALS (6-12 months):
1. Achieve significant symptom reduction
2. Improve overall functioning and quality of life
3. Develop robust coping mechanisms and relapse prevention strategies
4. Enhance social support network and interpersonal relationships

RECOMMENDED INTERVENTIONS:
- Regular psychiatric sessions (weekly initially, then bi-weekly)
- Medication evaluation and management
- Psychoeducation about condition and treatment
- Cognitive-behavioral therapy techniques
- Stress management and relaxation training

FOLLOW-UP ACTIONS:
- Schedule regular medication reviews
- Monitor treatment response and side effects
- Coordinate with other healthcare providers as needed
- Consider adjunct therapies (group therapy, family therapy)

This treatment plan should be reviewed and updated regularly based on patient response and clinical progress.

Generated by: ${doctorInfo.name}, ${doctorInfo.credentials}
Date: ${new Date().toLocaleDateString()}`;

                    handleOpenModal("Generated Treatment Plan", mockPlan);
                    setIsLoadingModal(false);
                }, 2000);
            };

            const notes = patient.notes || [];

            return (
                <div className="space-y-6">
                    <div className="rounded-lg bg-gray-50 p-6 shadow-sm">
                        <h3 className="text-xl font-semibold text-gray-800">New Session Note</h3>
                        <NoteForm onSave={handleAddNote} />
                        <button onClick={generateTreatmentPlan} disabled={isLoadingModal} className={`mt-4 w-full flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors ${isLoadingModal ? 'bg-gray-400 text-gray-600 cursor-not-allowed' : 'bg-green-600 text-white hover:bg-green-700'}`}>
                            {isLoadingModal ? 'Generating...' : 'Generate Treatment Plan'}
                        </button>
                    </div>
                    <div className="space-y-4">
                        {notes.length === 0 ? (
                            <p className="text-center text-gray-500">No session notes found.</p>
                        ) : (
                            notes.map(note => (
                                <NoteCard key={note.id} note={note} onDelete={() => handleDeleteNote(note.id)} />
                            ))
                        )}
                    </div>
                    {isModalOpen && (
                        <Modal title={modalContent.title} text={modalContent.text} onClose={handleCloseModal} isLoading={isLoadingModal} />
                    )}
                </div>
            );
        };

        const NoteForm = ({ onSave }) => {
            const [noteText, setNoteText] = useState('');
            const handleSubmit = (e) => {
                e.preventDefault();
                if (noteText.trim()) {
                    onSave(noteText);
                    setNoteText('');
                }
            };
            return (
                <form onSubmit={handleSubmit} className="mt-4">
                    <textarea
                        value={noteText}
                        onChange={(e) => setNoteText(e.target.value)}
                        rows="4"
                        placeholder="Enter session notes here..."
                        className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50"
                    />
                    <button type="submit" className="mt-3 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">Add Note</button>
                </form>
            );
        };

        const NoteCard = ({ note, onDelete }) => {
            const Trash2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>;
            return (
                <div className="rounded-lg bg-white p-6 shadow-sm">
                    <div className="flex justify-between items-center">
                        <p className="text-sm font-semibold text-gray-500">{note.date}</p>
                        <button onClick={onDelete} className="p-1 rounded-lg hover:bg-gray-100">
                            <Trash2 />
                        </button>
                    </div>
                    <p className="mt-2 text-gray-800 whitespace-pre-wrap">{note.note}</p>
                </div>
            );
        };

        const MedicationSection = ({ patient, patients, setPatients, setView }) => {
            const [newMedication, setNewMedication] = useState({ name: '', dosage: '', frequency: '' });
            
            const handleAddMedication = (e) => {
                e.preventDefault();
                if (!newMedication.name) return;
                
                const medication = {
                    id: Date.now().toString(),
                    ...newMedication,
                    timestamp: new Date()
                };
                
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, medications: [...(p.medications || []), medication] }
                        : p
                ));
                
                setNewMedication({ name: '', dosage: '', frequency: '' });
            };
            
            const handleDeleteMedication = (medId) => {
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, medications: (p.medications || []).filter(m => m.id !== medId) }
                        : p
                ));
            };
            
            const handleGeneratePrescription = () => {
                setView('prescriptions');
            };
            
            const Trash2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>;
            
            const medications = patient.medications || [];
            
            return (
                <div className="space-y-6">
                    <div className="rounded-lg bg-gray-50 p-6 shadow-sm">
                        <h3 className="text-xl font-semibold text-gray-800">Add New Medication</h3>
                        <form onSubmit={handleAddMedication} className="mt-4 space-y-3">
                            <input type="text" value={newMedication.name} onChange={(e) => setNewMedication({...newMedication, name: e.target.value})} placeholder="Medication Name" required className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <input type="text" value={newMedication.dosage} onChange={(e) => setNewMedication({...newMedication, dosage: e.target.value})} placeholder="Dosage (e.g., 10mg)" className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <input type="text" value={newMedication.frequency} onChange={(e) => setNewMedication({...newMedication, frequency: e.target.value})} placeholder="Frequency (e.g., once daily)" className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <button type="submit" className="w-full rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">Add Medication</button>
                        </form>
                    </div>
                    <div className="rounded-lg bg-white p-6 shadow-sm">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-semibold text-gray-800">Current Medications</h3>
                            <button onClick={handleGeneratePrescription} className="rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Generate Prescription</button>
                        </div>
                        <ul className="space-y-3">
                            {medications.length === 0 ? (
                                <p className="text-gray-500">No medications listed.</p>
                            ) : (
                                medications.map(med => (
                                    <li key={med.id} className="flex justify-between items-center rounded-lg bg-gray-50 p-4 shadow-sm">
                                        <div>
                                            <h4 className="font-medium">{med.name}</h4>
                                            <p className="text-sm text-gray-600">{med.dosage} - {med.frequency}</p>
                                        </div>
                                        <button onClick={() => handleDeleteMedication(med.id)} className="p-1 rounded-lg hover:bg-gray-100">
                                            <Trash2 />
                                        </button>
                                    </li>
                                ))
                            )}
                        </ul>
                    </div>
                </div>
            );
        };

        const PrescriptionForm = ({ patient, doctorInfo, setView }) => {
            const [prescriptionData, setPrescriptionData] = useState({
                medication: '',
                dosage: '',
                quantity: '',
                refills: '',
                instructions: '',
            });
            
            const handleChange = (e) => {
                const { name, value } = e.target;
                setPrescriptionData({ ...prescriptionData, [name]: value });
            };
            
            const handlePrint = () => {
                window.print();
            };
            
            const handleGoBack = () => {
                setView('details');
            };
            
            return (
                <div className="rounded-xl bg-white shadow-lg p-6">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-2xl font-semibold">Prescription Generator</h2>
                        <div className="space-x-2">
                            <button onClick={handleGoBack} className="rounded-lg bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300">
                                Back
                            </button>
                            <button onClick={handlePrint} className="rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">
                                Print Prescription
                            </button>
                        </div>
                    </div>
                    <div className="printable-content border border-gray-300 rounded-lg p-8">
                        <div className="flex justify-between items-start">
                            <div>
                                <h1 className="text-xl font-bold">{doctorInfo.name}</h1>
                                <p className="text-sm">{doctorInfo.credentials}</p>
                                <p className="text-sm text-gray-600">{doctorInfo.contact}</p>
                                <p className="text-sm text-gray-600">{doctorInfo.address}</p>
                            </div>
                            <p className="text-sm text-gray-500">Date: {new Date().toLocaleDateString()}</p>
                        </div>
                        <div className="mt-6 border-b border-gray-300 pb-4">
                            <p className="font-semibold">Patient Information:</p>
                            <p className="text-sm">Name: {patient.name}</p>
                            <p className="text-sm">DOB: {patient.dob}</p>
                        </div>
                        <div className="mt-6 space-y-4">
                            <div className="flex items-center space-x-2">
                                <span className="text-2xl">℞</span>
                                <input type="text" name="medication" value={prescriptionData.medication} onChange={handleChange} placeholder="Medication Name" className="flex-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Dosage</label>
                                <input type="text" name="dosage" value={prescriptionData.dosage} onChange={handleChange} placeholder="e.g., 10mg" className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Quantity</label>
                                <input type="text" name="quantity" value={prescriptionData.quantity} onChange={handleChange} placeholder="e.g., 30 tablets" className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Refills</label>
                                <input type="text" name="refills" value={prescriptionData.refills} onChange={handleChange} placeholder="e.g., 3" className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Instructions (Sig)</label>
                                <textarea name="instructions" value={prescriptionData.instructions} onChange={handleChange} placeholder="e.g., Take one tablet by mouth daily in the morning." rows="2" className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            </div>
                        </div>
                        <div className="mt-8 border-t border-gray-300 pt-4">
                            <p className="text-xs text-gray-500">
                                This form is not a valid prescription. Please verify all information before issuing a final prescription.
                            </p>
                            <div className="flex justify-between items-center mt-4">
                                <div className="text-sm">DEA No. XXX-XXX-XXX</div>
                                <div className="text-lg font-bold">Signature: _______________________</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const BillingSection = ({ patient, patients, setPatients }) => {
            const [newBill, setNewBill] = useState({ date: new Date().toISOString().slice(0, 10), service: '', amount: '' });
            
            const handleAddBill = (e) => {
                e.preventDefault();
                if (!newBill.service || !newBill.amount) return;
                
                const bill = {
                    id: Date.now().toString(),
                    ...newBill
                };
                
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, bills: [...(p.bills || []), bill] }
                        : p
                ));
                
                setNewBill({ date: new Date().toISOString().slice(0, 10), service: '', amount: '' });
            };
            
            const handleDeleteBill = (billId) => {
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, bills: (p.bills || []).filter(b => b.id !== billId) }
                        : p
                ));
            };
            
            const Trash2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>;
            
            const bills = (patient.bills || []).sort((a, b) => new Date(b.date) - new Date(a.date));
            
            return (
                <div className="space-y-6">
                    <div className="rounded-lg bg-gray-50 p-6 shadow-sm">
                        <h3 className="text-xl font-semibold text-gray-800">Add New Bill</h3>
                        <form onSubmit={handleAddBill} className="mt-4 space-y-3">
                            <input type="date" value={newBill.date} onChange={(e) => setNewBill({ ...newBill, date: e.target.value })} required className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <input type="text" value={newBill.service} onChange={(e) => setNewBill({ ...newBill, service: e.target.value })} placeholder="Service Provided" required className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <input type="number" value={newBill.amount} onChange={(e) => setNewBill({ ...newBill, amount: e.target.value })} placeholder="Amount ($)" required className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <button type="submit" className="w-full rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">Add Bill</button>
                        </form>
                    </div>
                    <div className="rounded-lg bg-white p-6 shadow-sm">
                        <h3 className="text-xl font-semibold text-gray-800">Billing History</h3>
                        <ul className="mt-4 space-y-3">
                            {bills.length === 0 ? (
                                <p className="text-gray-500">No billing records found.</p>
                            ) : (
                                bills.map(bill => (
                                    <li key={bill.id} className="flex justify-between items-center rounded-lg bg-gray-50 p-4 shadow-sm">
                                        <div>
                                            <h4 className="font-medium text-gray-800">{bill.service}</h4>
                                            <p className="text-sm text-gray-600">{bill.date} - ${bill.amount}</p>
                                        </div>
                                        <button onClick={() => handleDeleteBill(bill.id)} className="p-1 rounded-lg hover:bg-gray-100">
                                            <Trash2 />
                                        </button>
                                    </li>
                                ))
                            )}
                        </ul>
                    </div>
                </div>
            );
        };

        const AppointmentsSection = ({ patient, patients, setPatients }) => {
            const [newAppointment, setNewAppointment] = useState({ date: new Date().toISOString().slice(0, 10), time: '', description: '' });
            
            const handleAddAppointment = (e) => {
                e.preventDefault();
                if (!newAppointment.date || !newAppointment.time) return;
                
                const appointment = {
                    id: Date.now().toString(),
                    ...newAppointment
                };
                
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, appointments: [...(p.appointments || []), appointment] }
                        : p
                ));
                
                setNewAppointment({ date: new Date().toISOString().slice(0, 10), time: '', description: '' });
            };
            
            const handleDeleteAppointment = (apptId) => {
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, appointments: (p.appointments || []).filter(a => a.id !== apptId) }
                        : p
                ));
            };
            
            const Trash2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>;
            
            const appointments = (patient.appointments || []).sort((a, b) => new Date(b.date) - new Date(a.date));
            
            return (
                <div className="space-y-6">
                    <div className="rounded-lg bg-gray-50 p-6 shadow-sm">
                        <h3 className="text-xl font-semibold text-gray-800">Schedule New Appointment</h3>
                        <form onSubmit={handleAddAppointment} className="mt-4 space-y-3">
                            <input type="date" value={newAppointment.date} onChange={(e) => setNewAppointment({ ...newAppointment, date: e.target.value })} required className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <input type="time" value={newAppointment.time} onChange={(e) => setNewAppointment({ ...newAppointment, time: e.target.value })} required className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <input type="text" value={newAppointment.description} onChange={(e) => setNewAppointment({ ...newAppointment, description: e.target.value })} placeholder="Description (e.g., Follow-up session)" className="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900" />
                            <button type="submit" className="w-full rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">Schedule Appointment</button>
                        </form>
                    </div>
                    <div className="rounded-lg bg-white p-6 shadow-sm">
                        <h3 className="text-xl font-semibold text-gray-800">Upcoming Appointments</h3>
                        <ul className="mt-4 space-y-3">
                            {appointments.length === 0 ? (
                                <p className="text-gray-500">No appointments scheduled.</p>
                            ) : (
                                appointments.map(appt => (
                                    <li key={appt.id} className="flex justify-between items-center rounded-lg bg-gray-50 p-4 shadow-sm">
                                        <div>
                                            <h4 className="font-medium text-gray-800">{appt.date} at {appt.time}</h4>
                                            <p className="text-sm text-gray-600">{appt.description}</p>
                                        </div>
                                        <button onClick={() => handleDeleteAppointment(appt.id)} className="p-1 rounded-lg hover:bg-gray-100">
                                            <Trash2 />
                                        </button>
                                    </li>
                                ))
                            )}
                        </ul>
                    </div>
                </div>
            );
        };

        const CaseSummarySection = ({ patient, patients, setPatients }) => {
            const [newSource, setNewSource] = useState('');
            const [summary, setSummary] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            
            const handleAddSource = () => {
                if (!newSource.trim()) return;
                
                const source = {
                    id: Date.now().toString(),
                    content: newSource,
                    timestamp: new Date()
                };
                
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, sources: [...(p.sources || []), source] }
                        : p
                ));
                
                setNewSource('');
            };
            
            const handleDeleteSource = (sourceId) => {
                setPatients(prev => prev.map(p => 
                    p.id === patient.id 
                        ? { ...p, sources: (p.sources || []).filter(s => s.id !== sourceId) }
                        : p
                ));
            };
            
            const generateSummary = () => {
                setIsLoading(true);
                setSummary('Generating summary...');
                
                // Mock response for demo
                setTimeout(() => {
                    const sources = patient.sources || [];
                    const mockSummary = sources.length > 0 
                        ? `Patient ${patient.name} (DOB: ${patient.dob}) presents with ${patient.diagnosis}. Based on the available documentation and clinical sources, the patient has been receiving ongoing psychiatric care. The case demonstrates the typical progression and management challenges associated with this condition. Current treatment approach appears appropriate with regular monitoring and adjustment of therapeutic interventions as needed. Continued follow-up and documentation of progress remains essential for optimal patient outcomes.`
                        : `Patient ${patient.name} (DOB: ${patient.dob}) with diagnosis of ${patient.diagnosis}. Limited source documentation available at this time. Recommend adding clinical notes, correspondence, or other relevant materials to generate a more comprehensive case summary.`;
                    
                    setSummary(mockSummary);
                    setIsLoading(false);
                }, 2000);
            };
            
            const Trash2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>;
            
            const sources = patient.sources || [];
            
            return (
                <div className="space-y-6">
                    <div className="rounded-lg bg-gray-50 p-6 shadow-sm">
                        <h3 className="text-xl font-semibold text-gray-800">Add Data Sources</h3>
                        <p className="mt-1 text-sm text-gray-500">Paste in information from emails, notes, or lab results.</p>
                        <div className="flex space-x-2 mt-4">
                            <textarea
                                value={newSource}
                                onChange={(e) => setNewSource(e.target.value)}
                                rows="4"
                                placeholder="Paste text from a document or email here..."
                                className="flex-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500"
                            />
                        </div>
                        <button onClick={handleAddSource} className="mt-3 w-full rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">Add Source</button>
                    </div>
                    <div className="rounded-lg bg-white p-6 shadow-sm">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-semibold text-gray-800">Generated Summary</h3>
                            <button onClick={generateSummary} disabled={isLoading} className={`rounded-lg px-4 py-2 text-white font-medium transition-colors ${isLoading ? 'bg-gray-400 text-gray-600 cursor-not-allowed' : 'bg-green-600 hover:bg-green-700'}`}>
                                {isLoading ? 'Generating...' : 'Generate Summary'}
                            </button>
                        </div>
                        <p className="mt-2 text-gray-800 whitespace-pre-wrap">{summary || "Click 'Generate Summary' to create a concise overview of the patient's case."}</p>
                        <div className="mt-6">
                            <h4 className="text-md font-medium text-gray-600 mb-2">Source Materials:</h4>
                            <ul className="space-y-2">
                                {sources.length === 0 ? (
                                    <p className="text-sm text-gray-500">No source materials added yet.</p>
                                ) : (
                                    sources.map(source => (
                                        <li key={source.id} className="flex justify-between items-start rounded-lg bg-gray-50 p-3 shadow-sm">
                                            <p className="text-sm text-gray-800">{source.content.substring(0, 100)}...</p>
                                            <button onClick={() => handleDeleteSource(source.id)} className="p-1 rounded-lg hover:bg-gray-100">
                                                <Trash2 />
                                            </button>
                                        </li>
                                    ))
                                )}
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        const SettingsForm = ({ doctorInfo, setDoctorInfo, setView }) => {
            const handleChange = (e) => {
                const { id, value } = e.target;
                setDoctorInfo({ ...doctorInfo, [id]: value });
            };
            
            const handleSubmit = (e) => {
                e.preventDefault();
                if (setView) {
                    setView('details');
                }
            };
            
            return (
                <div className="rounded-xl bg-white shadow-lg">
                    <div className="p-6">
                        <h2 className="text-2xl font-semibold">Doctor Information</h2>
                        <p className="mt-1 text-sm text-gray-500">
                            Update your name and credentials to appear on prescriptions and documents.
                        </p>
                    </div>
                    <form onSubmit={handleSubmit}>
                        <div className="space-y-4 p-6 pt-0">
                            <div>
                                <label htmlFor="name" className="mb-1 block text-sm font-medium text-gray-700">Full Name</label>
                                <input id="name" type="text" value={doctorInfo.name} onChange={handleChange} required className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                            </div>
                            <div>
                                <label htmlFor="credentials" className="mb-1 block text-sm font-medium text-gray-700">Credentials</label>
                                <input id="credentials" type="text" value={doctorInfo.credentials} onChange={handleChange} required className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                            </div>
                            <div>
                                <label htmlFor="contact" className="mb-1 block text-sm font-medium text-gray-700">Contact Information</label>
                                <input id="contact" type="text" value={doctorInfo.contact} onChange={handleChange} required className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                            </div>
                            <div>
                                <label htmlFor="address" className="mb-1 block text-sm font-medium text-gray-700">Address</label>
                                <input id="address" type="text" value={doctorInfo.address} onChange={handleChange} className="block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                            </div>
                        </div>
                        <div className="flex justify-end p-6">
                            <button type="submit" className="rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">Save Changes</button>
                        </div>
                    </form>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <AppProvider>
                <App />
            </AppProvider>
        );
    </script>
</body>
</html>
